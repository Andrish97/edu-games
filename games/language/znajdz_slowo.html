<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Znajd≈∫ s≈Çowo ‚Äì ≈õwiaty</title>
  <style>
    body {
      background: radial-gradient(circle at top, #1f2933, #020617);
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    .card {
      padding: 20px 22px 22px;
      border-radius: 16px;
      background: rgba(15, 23, 42, 0.96);
      box-shadow:
        0 18px 45px rgba(0, 0, 0, 0.8),
        0 0 0 1px rgba(148, 163, 184, 0.12);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 340px;
      max-width: 480px;
      backdrop-filter: blur(8px);
    }

    .title {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #e5e7eb;
      margin-bottom: 8px;
      text-align: center;
    }

	.worlds-row {
	  display: flex;
	  flex-wrap: wrap;          /* ‚¨Ö zamiast przewijania w bok, przyciski zawijajƒÖ siƒô */
	  gap: 6px;
	  margin-bottom: 12px;
	  width: 100%;
	}

	.world-btn {
	  flex: 1 1 calc(50% - 6px);  /* ‚¨Ö dwa przyciski w wierszu */
	  min-width: 0;
	  padding: 4px 6px;
	  border-radius: 999px;
	  border: 1px solid rgba(148, 163, 184, 0.6);
	  background: rgba(15, 23, 42, 0.9);
	  color: #e5e7eb;
	  cursor: pointer;
	  font-size: 11px;
	  font-weight: 500;
	  display: flex;
	  align-items: center;
	  justify-content: center;
	  gap: 4px;
	  white-space: nowrap;
	  box-shadow: 0 4px 10px rgba(15, 23, 42, 0.9);
	  transition: transform 0.06s ease, box-shadow 0.06s ease, background 0.08s, border-color 0.08s, opacity 0.1s;
	}


    .world-btn span.icon {
      font-size: 14px;
    }

    .world-btn.active {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #022c22;
      border-color: #4ade80;
      box-shadow: 0 8px 18px rgba(22, 163, 74, 0.55);
    }

    .world-btn.locked {
      opacity: 0.4;
      cursor: default;
      box-shadow: none;
    }

    .world-btn:hover:not(.locked):not(.active) {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.95);
    }

    .top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      font-size: 12px;
      margin-bottom: 8px;
      color: #cbd5f5;
    }

    .streak-info {
      font-weight: 500;
    }

    .streak-highlight {
      color: #4ade80;
    }

    .progress-wrapper {
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      overflow: hidden;
      margin-bottom: 14px;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      transition: width 0.25s ease;
    }

    .emoji-box {
      width: 120px;
      height: 120px;
      border-radius: 24px;
      background: radial-gradient(circle at 30% 20%, #facc15, #f97316 45%, #7c2d12 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 64px;
      margin-bottom: 16px;
      box-shadow:
        0 18px 35px rgba(0, 0, 0, 0.85),
        0 0 0 1px rgba(248, 250, 252, 0.06);
    }

    .hint {
      font-size: 14px;
      color: #cbd5f5;
      margin-bottom: 10px;
      text-align: center;
      min-height: 18px;
    }

    .choices {
      display: flex;
      flex-direction: column;
      gap: 8px;
      width: 100%;
      margin-top: 4px;
    }

    .choice-btn {
      width: 100%;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      cursor: pointer;
      font-size: 15px;
      font-weight: 500;
      text-align: center;
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.8);
      transition:
        transform 0.06s ease,
        box-shadow 0.06s ease,
        background 0.08s,
        border-color 0.08s,
        filter 0.08s;
    }

    .choice-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.95);
      filter: brightness(1.05);
    }

    .choice-btn:active {
      transform: translateY(0px) scale(0.98);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.9);
      filter: brightness(0.96);
    }

    .choice-btn.correct {
      background: radial-gradient(circle at top, #22c55e, #16a34a);
      border-color: #4ade80;
      color: #022c22;
    }

    .choice-btn.wrong {
      background: radial-gradient(circle at top, #f97373, #b91c1c);
      border-color: #fecaca;
    }

    .choice-btn.disabled {
      pointer-events: none;
      opacity: 0.65;
    }

    .shake {
      animation: shake 0.25s;
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-3px); }
      100% { transform: translateX(0); }
    }

    .bottom-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      margin-top: 12px;
      gap: 8px;
      font-size: 13px;
    }

    #score {
      font-weight: 600;
      letter-spacing: 0.03em;
      color: #e5e7eb;
    }

    #message {
      margin-top: 6px;
      min-height: 24px;
      font-size: 13px;
      color: #c4b5fd;
      text-align: center;
    }

    button#next {
      padding: 6px 14px;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #052e16;
      box-shadow: 0 8px 18px rgba(22, 163, 74, 0.45);
      transition: transform 0.06s ease, box-shadow 0.06s ease, filter 0.08s;
    }

    button#next:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(22, 163, 74, 0.6);
      filter: brightness(1.05);
    }

    button#next:active {
      transform: translateY(0px) scale(0.98);
      box-shadow: 0 6px 14px rgba(22, 163, 74, 0.45);
      filter: brightness(0.97);
    }
  </style>
</head>
<body>

	<script>
	(function() {
	  // je≈õli gra zosta≈Ça otwarta jako fullscreen (z index.html)
	  const params = new URLSearchParams(window.location.search);
	  const isFullscreen = params.get("fullscreen") === "1";

	  if (!isFullscreen) return;

	  const btn = document.createElement("button");
	  btn.textContent = "Powr√≥t do Arcade";
	  btn.style.position = "fixed";
	  btn.style.top = "20px";
	  btn.style.left = "20px";
	  btn.style.padding = "8px 16px";
	  btn.style.border = "none";
	  btn.style.borderRadius = "999px";
	  btn.style.cursor = "pointer";
	  btn.style.zIndex = "9999";
	  btn.style.fontSize = "14px";
	  btn.style.fontWeight = "600";
	  btn.style.background = "linear-gradient(135deg,#22c55e,#16a34a)";
	  btn.style.color = "#052e16";
	  btn.style.boxShadow = "0 8px 18px rgba(22,163,74,0.45)";
	  btn.style.transition = "transform 0.06s ease, box-shadow 0.06s ease";

	  btn.onmouseover = () => {
		btn.style.transform = "translateY(-1px)";
		btn.style.boxShadow = "0 12px 26px rgba(22,163,74,0.6)";
	  };
	  btn.onmouseout = () => {
		btn.style.transform = "translateY(0)";
		btn.style.boxShadow = "0 8px 18px rgba(22,163,74,0.45)";
	  };

	  btn.onclick = () => {
		// wraca do index.html niezale≈ºnie co to za gra i skƒÖd
		window.location.href = "../index.html";
	  };

	  document.body.appendChild(btn);
	})();
	</script>

  <div class="card">
    <div class="title">Znajd≈∫ s≈Çowo</div>

    <div class="worlds-row" id="worldsRow">
      <!-- przyciski poziom√≥w wype≈Çni JS -->
    </div>

    <div class="top-row">
      <div class="world-name" id="worldNameLabel">≈öwiat: Zwierzƒôta</div>
      <div class="streak-info">
        Seria: <span id="streak">0</span>
      </div>
    </div>

    <div class="progress-wrapper">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="emoji-box" id="emoji">üê±</div>
    <div class="hint" id="hint">
      Kliknij wyraz, kt√≥ry pasuje do obrazka.
    </div>

    <div class="choices" id="choices"></div>

    <div id="message"></div>

    <div class="bottom-row">
      <div id="score">Punkty: 0</div>
      <button id="next">Nastƒôpne</button>
	  <button id="resetProgress" style="
	    margin-top: 10px;
	    padding: 6px 14px;
	    border-radius: 999px;
	    border: none;
	    cursor: pointer;
	    font-size: 12px;
	    font-weight: 500;
	    background: linear-gradient(135deg,#ef4444,#dc2626);
	    color: #fff;
	    box-shadow: 0 6px 16px rgba(220,38,38,0.45);
	">Wyczy≈õƒá postƒôp</button>
    </div>
  </div>

  <script>
    // Konfiguracja ≈õwiat√≥w / poziom√≥w
    const QUESTIONS_PER_LEVEL = 6;

    const WORLDS = [
	  {
		id: "animals",
		name: "Zwierzƒôta",
		icon: "üêæ",
		hint: "Czytaj nazwy zwierzƒÖt i znajd≈∫ w≈Ça≈õciwƒÖ.",
		rounds: [
		  { emoji: "üê±", correct: "kot", others: ["pies", "mysz"] },
		  { emoji: "üê∂", correct: "pies", others: ["kot", "ryba"] },
		  { emoji: "üê≠", correct: "mysz", others: ["kot", "≈ºaba"] },
		  { emoji: "üê∞", correct: "kr√≥lik", others: ["pies", "ko≈Ñ"] },
		  { emoji: "üêπ", correct: "chomik", others: ["mysz", "kot"] },
		  { emoji: "üê∑", correct: "≈õwinia", others: ["koza", "krowa"] },
		  { emoji: "üêÆ", correct: "krowa", others: ["koza", "owca"] },
		  { emoji: "üê¥", correct: "ko≈Ñ", others: ["pies", "krowa"] },
		  { emoji: "üêë", correct: "owca", others: ["koza", "kura"] },
		  { emoji: "üêê", correct: "koza", others: ["owca", "≈õwinia"] },
		  { emoji: "üêî", correct: "kura", others: ["kaczka", "gƒô≈õ"] },
		  { emoji: "ü¶Ü", correct: "kaczka", others: ["kura", "gƒô≈õ"] },
		  { emoji: "ü¶¢", correct: "≈Çabƒôd≈∫", others: ["kaczka", "gƒô≈õ"] },
		  { emoji: "ü¶ä", correct: "lis", others: ["pies", "kot"] },
		  { emoji: "üêª", correct: "mi≈õ", others: ["pies", "kot"] },
		  { emoji: "üê∏", correct: "≈ºaba", others: ["ryba", "mysz"] },
		  { emoji: "üêü", correct: "ryba", others: ["pies", "kot"] },
		  { emoji: "üê¢", correct: "≈º√≥≈Çw", others: ["≈ºaba", "ryba"] },
		  { emoji: "üêù", correct: "pszczo≈Ça", others: ["motyl", "biedronka"] },
		  { emoji: "ü¶ã", correct: "motyl", others: ["pszczo≈Ça", "biedronka"] },
		  { emoji: "üêû", correct: "biedronka", others: ["pszczo≈Ça", "mr√≥wka"] },
		  { emoji: "üêú", correct: "mr√≥wka", others: ["pszczo≈Ça", "komar"] }
		]
	  },
	  {
		id: "food",
		name: "Jedzenie",
		icon: "üçé",
		hint: "Znajd≈∫ nazwƒô owocu lub jedzenia.",
		rounds: [
		  { emoji: "üçé", correct: "jab≈Çko", others: ["gruszka", "banan"] },
		  { emoji: "üçå", correct: "banan", others: ["jab≈Çko", "pomidor"] },
		  { emoji: "üçê", correct: "gruszka", others: ["jab≈Çko", "marchewka"] },
		  { emoji: "üçä", correct: "pomara≈Ñcza", others: ["cytryna", "jab≈Çko"] },
		  { emoji: "üçã", correct: "cytryna", others: ["pomara≈Ñcza", "truskawka"] },
		  { emoji: "üçì", correct: "truskawka", others: ["jab≈Çko", "malina"] },
		  { emoji: "üçá", correct: "winogrono", others: ["jab≈Çko", "banan"] },
		  { emoji: "üçí", correct: "wi≈õnia", others: ["truskawka", "≈õliwka"] },
		  { emoji: "ü•ï", correct: "marchewka", others: ["og√≥rek", "ziemniak"] },
		  { emoji: "ü•í", correct: "og√≥rek", others: ["marchewka", "sa≈Çata"] },
		  { emoji: "ü•î", correct: "ziemniak", others: ["marchewka", "ry≈º"] },
		  { emoji: "üçÖ", correct: "pomidor", others: ["jab≈Çko", "marchewka"] },
		  { emoji: "ü•¨", correct: "sa≈Çata", others: ["kapusta", "pomidor"] },
		  { emoji: "üçû", correct: "chleb", others: ["ciasto", "lody"] },
		  { emoji: "ü•ê", correct: "rogalik", others: ["chleb", "bu≈Çka"] },
		  { emoji: "ü•ñ", correct: "bagietka", others: ["bu≈Çka", "chleb"] },
		  { emoji: "üßÄ", correct: "ser", others: ["chleb", "mas≈Ço"] },
		  { emoji: "ü•ö", correct: "jajko", others: ["ser", "mas≈Ço"] },
		  { emoji: "üçï", correct: "pizza", others: ["makaron", "ry≈º"] },
		  { emoji: "üçù", correct: "makaron", others: ["ry≈º", "zupa"] },
		  { emoji: "üçö", correct: "ry≈º", others: ["makaron", "ziemniak"] },
		  { emoji: "üç∞", correct: "ciasto", others: ["chleb", "lody"] },
		  { emoji: "üßÅ", correct: "babeczka", others: ["ciasto", "lody"] },
		  { emoji: "üç¶", correct: "lody", others: ["ciasto", "pizza"] },
		  { emoji: "ü•õ", correct: "mleko", others: ["woda", "sok"] },
		  { emoji: "ü•§", correct: "sok", others: ["woda", "mleko"] },
		  { emoji: "üíß", correct: "woda", others: ["sok", "mleko"] }
		]
	  },
	  {
		id: "home",
		name: "Dom",
		icon: "üè†",
		hint: "To rzeczy w domu. Jak siƒô nazywajƒÖ?",
		rounds: [
		  { emoji: "üè†", correct: "dom", others: ["szko≈Ça", "sklep"] },
		  { emoji: "üõèÔ∏è", correct: "≈Ç√≥≈ºko", others: ["st√≥≈Ç", "krzes≈Ço"] },
		  { emoji: "üõãÔ∏è", correct: "sofa", others: ["≈Ç√≥≈ºko", "krzes≈Ço"] },
		  { emoji: "ü™ë", correct: "krzes≈Ço", others: ["st√≥≈Ç", "≈Ç√≥≈ºko"] },
		  { emoji: "ü™ü", correct: "okno", others: ["drzwi", "zegar"] },
		  { emoji: "üö™", correct: "drzwi", others: ["okno", "st√≥≈Ç"] },
		  { emoji: "üß∏", correct: "zabawka", others: ["ksiƒÖ≈ºka", "telefon"] },
		  { emoji: "üì∫", correct: "telewizor", others: ["telefon", "komputer"] },
		  { emoji: "üì±", correct: "telefon", others: ["telewizor", "zegar"] },
		  { emoji: "üï∞Ô∏è", correct: "zegar", others: ["lampa", "okno"] },
		  { emoji: "üí°", correct: "lampa", others: ["zegar", "okno"] },
		  { emoji: "üì¶", correct: "pude≈Çko", others: ["ksiƒÖ≈ºka", "plecak"] },
		  { emoji: "üßπ", correct: "miot≈Ça", others: ["zmiotka", "szufelka"] },
		  { emoji: "ü™£", correct: "wiadro", others: ["pude≈Çko", "krzes≈Ço"] }
		]
	  },
	  {
		id: "school",
		name: "Szko≈Ça",
		icon: "üè´",
		hint: "Przedmioty i osoby w szkole.",
		rounds: [
		  { emoji: "üè´", correct: "szko≈Ça", others: ["dom", "sklep"] },
		  { emoji: "üìö", correct: "ksiƒÖ≈ºka", others: ["zeszyt", "zabawka"] },
		  { emoji: "üìì", correct: "zeszyt", others: ["ksiƒÖ≈ºka", "gazeta"] },
		  { emoji: "‚úèÔ∏è", correct: "o≈Ç√≥wek", others: ["d≈Çugopis", "no≈ºyczki"] },
		  { emoji: "üñäÔ∏è", correct: "d≈Çugopis", others: ["o≈Ç√≥wek", "klej"] },
		  { emoji: "‚úÇÔ∏è", correct: "no≈ºyczki", others: ["klej", "linijka"] },
		  { emoji: "üìê", correct: "linijka", others: ["o≈Ç√≥wek", "zeszyt"] },
		  { emoji: "üß¥", correct: "klej", others: ["no≈ºyczki", "d≈Çugopis"] },
		  { emoji: "üéí", correct: "plecak", others: ["pude≈Çko", "ksiƒÖ≈ºka"] },
		  { emoji: "üßë‚Äçüè´", correct: "nauczyciel", others: ["tata", "kolega"] },
		  { emoji: "üë©‚Äçüè´", correct: "nauczycielka", others: ["mama", "kole≈ºanka"] },
		  { emoji: "üßë‚Äçüéì", correct: "ucze≈Ñ", others: ["nauczyciel", "brat"] },
		  { emoji: "üî§", correct: "litery", others: ["cyfry", "obrazki"] },
		  { emoji: "üî¢", correct: "cyfry", others: ["litery", "ksiƒÖ≈ºki"] }
		]
	  },
	  {
		id: "actions",
		name: "Czynno≈õci",
		icon: "üèÉ",
		hint: "Co robi dziecko na obrazku?",
		rounds: [
		  { emoji: "üèÉ‚Äç‚ôÇÔ∏è", correct: "biega", others: ["≈õpi", "siedzi"] },
		  { emoji: "üò¥", correct: "≈õpi", others: ["biega", "czyta"] },
		  { emoji: "üìñ", correct: "czyta", others: ["pisze", "rysuje"] },
		  { emoji: "‚úçÔ∏è", correct: "pisze", others: ["czyta", "biega"] },
		  { emoji: "üé®", correct: "rysuje", others: ["czyta", "gra"] },
		  { emoji: "‚öΩ", correct: "gra", others: ["≈õpi", "czyta"] },
		  { emoji: "ü•§", correct: "pije", others: ["je", "≈õpi"] },
		  { emoji: "üçΩÔ∏è", correct: "je", others: ["pije", "rysuje"] },
		  { emoji: "üëÇ", correct: "s≈Çucha", others: ["czyta", "pisze"] },
		  { emoji: "üëÄ", correct: "patrzy", others: ["biega", "≈õpi"] },
		  { emoji: "üßº", correct: "myje rƒôce", others: ["je", "≈õpi"] },
		  { emoji: "ü™•", correct: "myje zƒôby", others: ["pisze", "je"] }
		]
	  },
	  {
		id: "clothes",
		name: "Ubrania",
		icon: "üëó",
		hint: "Jak nazywajƒÖ siƒô czƒô≈õci ubrania?",
		rounds: [
		  { emoji: "üëï", correct: "koszulka", others: ["spodnie", "sukienka"] },
		  { emoji: "üëñ", correct: "spodnie", others: ["buty", "koszulka"] },
		  { emoji: "üëó", correct: "sukienka", others: ["koszulka", "sp√≥dnica"] },
		  { emoji: "üëü", correct: "buty", others: ["skarpetki", "czapka"] },
		  { emoji: "üß¶", correct: "skarpetki", others: ["buty", "spodnie"] },
		  { emoji: "üß•", correct: "kurtka", others: ["koszulka", "czapka"] },
		  { emoji: "üß¢", correct: "czapka", others: ["kurtka", "szalik"] },
		  { emoji: "üß£", correct: "szalik", others: ["czapka", "koszulka"] },
		  { emoji: "üß§", correct: "rƒôkawiczki", others: ["skarpetki", "buty"] }
		]
	  },
	  {
		id: "nature",
		name: "Przyroda",
		icon: "üåø",
		hint: "Elementy przyrody i pogody.",
		rounds: [
		  { emoji: "‚òÄÔ∏è", correct: "s≈Ço≈Ñce", others: ["ksiƒô≈ºyc", "gwiazda"] },
		  { emoji: "üåô", correct: "ksiƒô≈ºyc", others: ["s≈Ço≈Ñce", "gwiazda"] },
		  { emoji: "‚≠ê", correct: "gwiazda", others: ["s≈Ço≈Ñce", "chmura"] },
		  { emoji: "‚òÅÔ∏è", correct: "chmura", others: ["s≈Ço≈Ñce", "≈õnieg"] },
		  { emoji: "üåßÔ∏è", correct: "deszcz", others: ["s≈Ço≈Ñce", "≈õnieg"] },
		  { emoji: "‚ùÑÔ∏è", correct: "≈õnieg", others: ["deszcz", "s≈Ço≈Ñce"] },
		  { emoji: "üåà", correct: "tƒôcza", others: ["deszcz", "s≈Ço≈Ñce"] },
		  { emoji: "üå≥", correct: "drzewo", others: ["kwiat", "trawa"] },
		  { emoji: "üå∏", correct: "kwiat", others: ["drzewo", "li≈õƒá"] },
		  { emoji: "üçÇ", correct: "li≈õƒá", others: ["kwiat", "trawa"] },
		  { emoji: "üåä", correct: "rzeka", others: ["g√≥ra", "drzewo"] },
		  { emoji: "‚õ∞Ô∏è", correct: "g√≥ra", others: ["rzeka", "dom"] }
		]
	  },
	  {
		id: "transport",
		name: "Pojazdy",
		icon: "üöó",
		hint: "Jakim pojazdem jedziemy lub lecimy?",
		rounds: [
		  { emoji: "üöó", correct: "samoch√≥d", others: ["rower", "autobus"] },
		  { emoji: "üöå", correct: "autobus", others: ["samoch√≥d", "tramwaj"] },
		  { emoji: "üöã", correct: "tramwaj", others: ["autobus", "pociƒÖg"] },
		  { emoji: "üöÜ", correct: "pociƒÖg", others: ["tramwaj", "samoch√≥d"] },
		  { emoji: "üö≤", correct: "rower", others: ["hulajnoga", "samoch√≥d"] },
		  { emoji: "üõ¥", correct: "hulajnoga", others: ["rower", "samoch√≥d"] },
		  { emoji: "‚úàÔ∏è", correct: "samolot", others: ["statek", "samoch√≥d"] },
		  { emoji: "üö¢", correct: "statek", others: ["samolot", "rower"] },
		  { emoji: "üöÄ", correct: "rakieta", others: ["samolot", "statek"] }
		]
	  },
	  {
		id: "family",
		name: "Rodzina",
		icon: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶",
		hint: "Kto jest kim w rodzinie?",
		rounds: [
		  { emoji: "üë©", correct: "mama", others: ["pani", "siostra"] },
		  { emoji: "üë®", correct: "tata", others: ["pan", "brat"] },
		  { emoji: "üëµ", correct: "babcia", others: ["mama", "pani"] },
		  { emoji: "üë¥", correct: "dziadek", others: ["tata", "pan"] },
		  { emoji: "üë¶", correct: "brat", others: ["kolega", "ch≈Çopiec"] },
		  { emoji: "üëß", correct: "siostra", others: ["kole≈ºanka", "dziewczynka"] },
		  { emoji: "üë∂", correct: "dziecko", others: ["brat", "siostra"] },
		  { emoji: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", correct: "rodzina", others: ["klasa", "grupa"] }
		]
	  }
	];


    const goodMessages = [
      "Brawo! Czytasz jak mistrz.",
      "Super! Twoje oczy sƒÖ szybkie jak laser.",
      "Tak jest! ≈öwietnie dopasowane s≈Çowo.",
      "Piƒôknie! Litery chyba ciƒô lubiƒÖ. üòä",
      "Ekstra! Kolejny dobry wyb√≥r.",
      "≈öwietnie! Ten ≈õwiat coraz ≈Çatwiejszy."
    ];

    const wrongMessages = [
      "Prawie! Zwr√≥ƒá uwagƒô na pierwszƒÖ literƒô.",
      "Spr√≥buj inaczej: popatrz na koniec s≈Çowa.",
      "Nie szkodzi. Przeczytaj powoli wszystkie wyrazy.",
      "Litery czasem mylƒÖ ‚Äì spr√≥buj jeszcze raz."
    ];

    const levelCompleteMessages = [
      "Poziom uko≈Ñczony! Odblokowujesz nowy ≈õwiat!",
      "≈öwietnie! Ten ≈õwiat jest tw√≥j.",
      "Brawo! Czas na kolejny poziom."
    ];

    const worldsRow = document.getElementById("worldsRow");
    const emojiEl = document.getElementById("emoji");
    const choicesEl = document.getElementById("choices");
    const scoreEl = document.getElementById("score");
    const messageEl = document.getElementById("message");
    const nextBtn = document.getElementById("next");
    const cardEl = document.querySelector(".card");
    const streakEl = document.getElementById("streak");
    const progressBar = document.getElementById("progressBar");
    const worldNameLabel = document.getElementById("worldNameLabel");
    const hintEl = document.getElementById("hint");

    let unlockedWorlds = 1;    // zaczynamy tylko ze Zwierzƒôtami
    let currentWorldIndex = 0;
    let currentRound = null;
    let answered = false;
    let score = 0;
    let streak = 0;
    let bestStreakCurrentWorld = 0;
    let questionInWorld = 0;
	
	const STORAGE_KEY = "znajdz_slowo_progress_v1";

	function saveProgress() {
	  const state = {
		unlockedWorlds,
		currentWorldIndex,
		score
	  };
	  try {
		localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
	  } catch (e) {
		// jak co≈õ nie zadzia≈Ça, po prostu ignorujemy
	  }
	}

	function loadProgress() {
	  try {
		const raw = localStorage.getItem(STORAGE_KEY);
		if (!raw) return;
		const state = JSON.parse(raw);

		if (typeof state.unlockedWorlds === "number") {
		  unlockedWorlds = state.unlockedWorlds;
		}
		if (typeof state.currentWorldIndex === "number") {
		  currentWorldIndex = Math.min(
			Math.max(0, state.currentWorldIndex),
			WORLDS.length - 1
		  );
		}
		if (typeof state.score === "number") {
		  score = state.score;
		  scoreEl.textContent = "Punkty: " + score;
		}
	  } catch (e) {
		// uszkodzony zapis ‚Äì ignorujemy
	  }
	}

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function randomItem(array) {
      return array[Math.floor(Math.random() * array.length)];
    }

    function buildWorldButtons() {
      worldsRow.innerHTML = "";
      WORLDS.forEach((world, index) => {
        const btn = document.createElement("button");
        btn.className = "world-btn";
        if (index === currentWorldIndex) {
          btn.classList.add("active");
        }
        if (index >= unlockedWorlds) {
          btn.classList.add("locked");
        }
        btn.dataset.index = index;

        const iconSpan = document.createElement("span");
        iconSpan.className = "icon";
        iconSpan.textContent = world.icon;

        const textSpan = document.createElement("span");
        textSpan.textContent = world.name;

        btn.appendChild(iconSpan);
        btn.appendChild(textSpan);

        btn.addEventListener("click", () => {
          if (index >= unlockedWorlds) {
            messageEl.textContent = "Ten ≈õwiat jest jeszcze zamkniƒôty. Uko≈Ñcz najpierw poprzedni.";
            return;
          }
          if (currentWorldIndex !== index) {
            currentWorldIndex = index;
            streak = 0;
            bestStreakCurrentWorld = 0;
            questionInWorld = 0;
            updateStreakDisplay();
            loadWorldInfo();
            loadRound();
            buildWorldButtons();
          }
        });

        worldsRow.appendChild(btn);
      });
    }

    function updateStreakDisplay() {
      streakEl.textContent = streak;
      const streakInfo = document.querySelector(".streak-info");
      if (streak >= 3) {
        streakInfo.classList.add("streak-highlight");
      } else {
        streakInfo.classList.remove("streak-highlight");
      }
    }

    function updateProgress() {
      const progress = (questionInWorld / QUESTIONS_PER_LEVEL) * 100;
      progressBar.style.width = progress + "%";
    }

    function loadWorldInfo() {
      const world = WORLDS[currentWorldIndex];
      worldNameLabel.textContent = "≈öwiat: " + world.name;
      hintEl.textContent = world.hint;
      updateProgress();
    }

    function pickRandomRoundFromWorld(world) {
      return world.rounds[Math.floor(Math.random() * world.rounds.length)];
    }

    function loadRound() {
      answered = false;
      messageEl.textContent = "";
      const world = WORLDS[currentWorldIndex];

      currentRound = pickRandomRoundFromWorld(world);
      emojiEl.textContent = currentRound.emoji;

      const options = shuffle([currentRound.correct, ...currentRound.others]);
      choicesEl.innerHTML = "";

      options.forEach(word => {
        const btn = document.createElement("button");
        btn.textContent = word;
        btn.className = "choice-btn";
        btn.addEventListener("click", () => handleChoice(btn, word === currentRound.correct));
        choicesEl.appendChild(btn);
      });

      updateProgress();
      updateStreakDisplay();
    }

    function handleChoice(button, isCorrect) {
      if (answered) return;
      answered = true;

      const allButtons = document.querySelectorAll(".choice-btn");
      allButtons.forEach(b => b.classList.add("disabled"));

      if (isCorrect) {
        button.classList.add("correct");
        const msg = randomItem(goodMessages);
        messageEl.textContent = msg;

        streak++;
        bestStreakCurrentWorld = Math.max(bestStreakCurrentWorld, streak);
        let bonus = streak >= 3 ? 1 : 0;
        score += 1 + bonus;
        scoreEl.textContent = "Punkty: " + score;
        updateStreakDisplay();
		saveProgress(); 

      } else {
        button.classList.add("wrong");
        const msg = randomItem(wrongMessages);
        messageEl.textContent = msg;
        streak = 0;
        updateStreakDisplay();

        cardEl.classList.remove("shake");
        void cardEl.offsetWidth;
        cardEl.classList.add("shake");

        allButtons.forEach(b => {
          if (b.textContent === currentRound.correct) {
            b.classList.add("correct");
          }
        });
      }
    }

    function completeWorldIfNeeded() {
      const world = WORLDS[currentWorldIndex];
      if (questionInWorld >= QUESTIONS_PER_LEVEL) {
        const msg = randomItem(levelCompleteMessages);
        messageEl.textContent = msg + " (Najlepsza seria w tym ≈õwiecie: " + bestStreakCurrentWorld + ")";
        questionInWorld = 0;
        bestStreakCurrentWorld = 0;
        streak = 0;
        updateStreakDisplay();

        if (unlockedWorlds < WORLDS.length && currentWorldIndex === unlockedWorlds - 1) {
          unlockedWorlds++;
          messageEl.textContent += " Nowy ≈õwiat odblokowany!";
        }
		saveProgress();
        buildWorldButtons();
      }
    }

    function nextRound() {
      if (!answered) {
        messageEl.textContent = "Najpierw wybierz s≈Çowo, potem przejd≈∫ dalej. üôÇ";
        return;
      }

      questionInWorld++;
      completeWorldIfNeeded();

      const allButtons = document.querySelectorAll(".choice-btn");
      allButtons.forEach(b => b.classList.remove("correct", "wrong", "disabled"));
      cardEl.classList.remove("shake");
      loadRound();
    }

    nextBtn.addEventListener("click", nextRound);

	// Start gry
	loadProgress();        // ‚¨Ö najpierw pr√≥bujemy wczytaƒá stan
	buildWorldButtons();
	loadWorldInfo();
	loadRound();

  </script>
</body>
</html>

