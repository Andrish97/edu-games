<!doctype html>
<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Znajd≈∫ s≈Çowo ‚Äì Neon Arcade</title>

    <link rel="icon" href="../../../favicon.ico" />
    <link rel="shortcut icon" href="../../../favicon.ico" />

    <!-- Global -->
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/game-layout.css" />

    <!-- Game -->
    <link rel="stylesheet" href="game.css" />

    <!-- Supabase ‚Äì przed auth.js -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

    <!-- Core -->
    <script src="../../../js/core/auth.js" defer></script>
    <script src="../../../js/core/progress.js" defer></script>
    <script src="../../../js/core/coins.js" defer></script>
    <script src="../../../js/core/auth-bar.js" defer></script>
    <script src="../../../js/core/ui.js" defer></script>

    <!-- Game logic -->
    <script src="game.js" defer></script>
  </head>

  <body class="arcade-body arcade-game">
    <!-- Pasek logowania + powr√≥t + üíé -->
    <div data-arcade-auth-bar data-back-url="../../../arcade.html"></div>

    <div class="ga-shell">
      <!-- ga-card = plansza gry (bez dodatkowej karty w ≈õrodku) -->
      <section class="ga-card">
        <div class="ga-topbar">
          <h1 class="ga-title" id="ga-title">Znajd≈∫ s≈Çowo</h1>

          <div class="ga-actions">
            <!-- Te przyciski majƒÖ styl z theme.css -->
            <button class="btn btn-main" id="btn-new">Nowa gra</button>
            <button class="btn btn-secondary" id="hintBtn">Podpowied≈∫ (5üíé)</button>
            <button class="btn btn-ghost" id="btn-stats">Staty</button>
          </div>
        </div>

        <!-- Panel stat√≥w (reset destrukcyjny TYLKO tutaj) -->
        <section class="ga-stats-panel" id="stats-panel">
          <div class="ga-stats">
            <div class="ga-stat c1">
              <span class="k">Punkty</span>
              <span class="v" id="v-score">0</span>
            </div>
            <div class="ga-stat c2">
              <span class="k">≈öwiat</span>
              <span class="v" id="v-world">‚Äî</span>
            </div>
            <div class="ga-stat c3">
              <span class="k">Seria</span>
              <span class="v" id="v-streak">0</span>
            </div>
          </div>

          <div class="ga-stats-actions">
            <button class="ga-record-reset" id="btn-reset-best">Wyczy≈õƒá postƒôp gry</button>
            <button class="btn btn-ghost" id="btn-stats-close">Zamknij</button>
          </div>
        </section>

        <div class="ga-stage">
          <!-- Mount gry -->
          <div id="game-mount">
            <div class="zs-wrap">
              <div class="zs-title">Znajd≈∫ s≈Çowo</div>

              <div class="worlds-row" id="worldsRow"></div>

              <div class="top-row">
                <div class="world-name" id="worldNameLabel">≈öwiat: ‚Äî</div>
                <div class="streak-info">
                  Seria: <span id="streak">0</span>
                </div>
              </div>

              <div class="progress-wrapper">
                <div class="progress-bar" id="progressBar"></div>
              </div>

              <!-- DU≈ªY EMOJI Z T≈ÅEM (CSS .emoji-box) -->
              <div class="emoji-box" id="emoji">üê±</div>

              <div class="hint" id="hint">Kliknij wyraz, kt√≥ry pasuje do obrazka.</div>

              <div class="choices" id="choices"></div>

              <div id="message"></div>

              <div class="bottom-row">
                <div id="score">Punkty: 0</div>
                <button id="next" class="btn btn-ghost">Nastƒôpne</button>
              </div>
            </div>
          </div>
        </div>

        <footer class="ga-footer">
          <div class="ga-hints" id="hints-slot"></div>
        </footer>
      </section>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const panel = document.getElementById("stats-panel");
        document.getElementById("btn-stats")?.addEventListener("click", () => panel?.classList.toggle("open"));
        document.getElementById("btn-stats-close")?.addEventListener("click", () => panel?.classList.remove("open"));
      });
    </script>
  </body>
</html>
